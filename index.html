<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Ø´Ù‡Ø± Ù…Ø§ÙÛŒØ§ - Ù†Ø³Ø®Ù‡ Ù†Ù‡Ø§ÛŒÛŒ (Escort Game)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lalezar&family=Vazirmatn:wght@300;500;700;900&display=swap" rel="stylesheet">
    <style>
        /* --- CORE THEME & VARIABLES --- */
        :root {
            --bg-deep: #0f172a;
            --bg-panel: #1e293b;
            --accent-gold: #fbbf24;
            --accent-gold-hover: #d97706;
            --accent-red: #ef4444;
            --accent-green: #22c55e;
            --accent-blue: #3b82f6;
            --text-main: #f8fafc;
            --text-muted: #94a3b8;
            --border-color: #334155;
            --shadow-glow: 0 0 15px rgba(251, 191, 36, 0.3);
        }

        * {
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: 'Vazirmatn', sans-serif;
            background-color: var(--bg-deep);
            color: var(--text-main);
            overflow: hidden; /* App-like feel */
            height: 100vh;
            width: 100vw;
            background-image: 
                radial-gradient(circle at 10% 20%, rgba(30, 41, 59, 0.8) 0%, transparent 20%),
                radial-gradient(circle at 90% 80%, rgba(59, 130, 246, 0.15) 0%, transparent 25%);
        }

        /* --- FONTS --- */
        .font-lalezar { font-family: 'Lalezar', cursive; }
        
        /* --- UTILITIES --- */
        .hide-scrollbar::-webkit-scrollbar { display: none; }
        .hide-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        
        .panel {
            background: rgba(30, 41, 59, 0.7);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
        }

        .btn-press {
            transition: transform 0.1s cubic-bezier(0.4, 0, 0.2, 1), box-shadow 0.2s;
            position: relative;
            overflow: hidden;
        }
        .btn-press:active { transform: scale(0.96); }
        .btn-press::after {
            content: ''; position: absolute; top: 50%; left: 50%; width: 5px; height: 5px;
            background: rgba(255, 255, 255, 0.5); opacity: 0; border-radius: 100%;
            transform: scale(1, 1) translate(-50%); transform-origin: 50% 50%;
        }

        /* --- SCREENS TRANSITIONS --- */
        .screen {
            position: absolute; inset: 0;
            opacity: 0; visibility: hidden;
            transform: scale(0.98);
            transition: opacity 0.4s ease, transform 0.4s ease, visibility 0.4s;
            display: flex; flex-direction: column;
            padding: 1rem;
            z-index: 10;
            overflow-y: auto;
        }
        .screen.active {
            opacity: 1; visibility: visible;
            transform: scale(1);
            z-index: 20;
        }

        /* --- ANIMATIONS --- */
        @keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }
        .animate-float { animation: float 6s ease-in-out infinite; }

        @keyframes pulse-gold { 0% { box-shadow: 0 0 0 0 rgba(251, 191, 36, 0.4); } 70% { box-shadow: 0 0 0 10px rgba(251, 191, 36, 0); } 100% { box-shadow: 0 0 0 0 rgba(251, 191, 36, 0); } }
        .pulse-effect { animation: pulse-gold 2s infinite; }

        /* --- CUSTOM COMPONENTS --- */
        .role-card {
            perspective: 1000px;
            height: 280px;
            cursor: pointer;
        }
        .role-card-inner {
            position: relative; width: 100%; height: 100%;
            text-align: center; transition: transform 0.8s;
            transform-style: preserve-3d;
        }
        .role-card.flipped .role-card-inner { transform: rotateY(180deg); }
        .role-front, .role-back {
            position: absolute; width: 100%; height: 100%;
            -webkit-backface-visibility: hidden; backface-visibility: hidden;
            border-radius: 1rem; display: flex; flex-direction: column;
            align-items: center; justify-content: center;
            border: 2px solid var(--accent-gold);
            box-shadow: var(--shadow-glow);
        }
        .role-front { background: var(--bg-panel); }
        .role-back {
            background: linear-gradient(135deg, #4b1f1f, #000);
            transform: rotateY(180deg);
        }
        .role-back.citizen { background: linear-gradient(135deg, #1e3a8a, #000); }

        /* Loader */
        .loader-ring {
            display: inline-block; width: 64px; height: 64px;
        }
        .loader-ring:after {
            content: " "; display: block; width: 46px; height: 46px; margin: 8px;
            border-radius: 50%; border: 5px solid var(--accent-gold);
            border-color: var(--accent-gold) transparent var(--accent-gold) transparent;
            animation: ring 1.2s linear infinite;
        }
        @keyframes ring { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

        /* Toast Notification */
        #toast-container {
            position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%);
            z-index: 100; pointer-events: none;
        }
        .toast {
            background: rgba(0,0,0,0.9); color: white; padding: 12px 24px;
            border-radius: 50px; margin-top: 10px; font-weight: bold;
            box-shadow: 0 4px 12px rgba(0,0,0,0.5);
            animation: slideUp 0.3s ease-out forwards;
        }
        @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

    </style>
</head>
<body>

    <!-- LOADING SCREEN -->
    <div id="loading-screen" class="screen active justify-center items-center bg-slate-900 z-50">
        <div class="text-center relative">
            <div class="loader-ring mb-4"></div>
            <h1 class="font-lalezar text-5xl text-[var(--accent-gold)] mb-2" style="text-shadow: 0 0 20px black;">Ø´Ù‡Ø± Ù…Ø§ÙÛŒØ§</h1>
            <p class="text-[var(--text-muted)] text-sm animate-pulse">ØªÛŒÙ… Ø§Ø³Ú©ÙˆØ±Øª Ú¯ÛŒÙ… ØªÙ‚Ø¯ÛŒÙ… Ù…ÛŒâ€ŒÚ©Ù†Ø¯...</p>
            <p id="loading-status" class="mt-8 text-xs text-slate-500 font-mono">Ø¯Ø± Ø­Ø§Ù„ Ø¢Ù…Ø§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø§Ø¨Ø²Ø§Ø±Ù‡Ø§...</p>
        </div>
    </div>

    <!-- MAIN MENU -->
    <div id="main-menu" class="screen">
        <header class="flex justify-between items-center mb-6 pt-2">
            <div class="flex items-center gap-2">
                <div class="w-10 h-10 rounded-full bg-gradient-to-br from-yellow-500 to-yellow-700 flex items-center justify-center shadow-lg">
                    <span class="font-bold text-white text-xl">M</span>
                </div>
                <div>
                    <h2 class="font-lalezar text-2xl text-white leading-none">Ø´Ù‡Ø± Ù…Ø§ÙÛŒØ§</h2>
                    <span class="text-[10px] text-yellow-500 font-bold uppercase tracking-wider">Ù†Ø³Ø®Ù‡ Ø­Ø±ÙÙ‡â€ŒØ§ÛŒ</span>
                </div>
            </div>
            <button onclick="openPanel('dev-panel')" class="p-2 rounded-full bg-slate-800 text-slate-400 hover:text-white transition-colors">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
            </button>
        </header>

        <main class="grid grid-cols-1 gap-4 pb-20">
            <!-- Hero Card: God Tools -->
            <div onclick="navigateTo('god-tools-screen')" class="panel p-6 rounded-2xl relative overflow-hidden group btn-press cursor-pointer border-l-4 border-yellow-500">
                <div class="absolute right-0 top-0 w-32 h-32 bg-yellow-500/10 rounded-full blur-2xl -mr-10 -mt-10"></div>
                <h3 class="font-lalezar text-3xl text-white mb-1 relative z-10">Ø§Ø¨Ø²Ø§Ø± Ú¯Ø±Ø¯Ø§Ù†Ù†Ø¯Ù‡ (God)</h3>
                <p class="text-slate-400 text-sm mb-4 relative z-10 w-3/4">Ù…Ø¯ÛŒØ±ÛŒØª Ú©Ø§Ù…Ù„ Ø¨Ø§Ø²ÛŒ ÙˆØ§Ù‚Ø¹ÛŒ! Ù¾Ø®Ø´ Ù†Ù‚Ø´ ØªØµØ§Ø¯ÙÛŒ Ùˆ ØªØ§ÛŒÙ…Ø± ØµØ­Ø¨Øª.</p>
                <div class="flex items-center gap-2 text-yellow-400 text-sm font-bold">
                    <span>ÙˆØ±ÙˆØ¯ Ø¨Ù‡ Ù¾Ù†Ù„</span>
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 rtl:rotate-180" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z" clip-rule="evenodd" /></svg>
                </div>
            </div>

            <div class="grid grid-cols-2 gap-4">
                <!-- Training -->
                <div onclick="startAcademy()" class="panel p-4 rounded-2xl btn-press cursor-pointer flex flex-col items-center justify-center text-center h-40 border-b-4 border-blue-600">
                    <span class="text-4xl mb-2">ğŸ“</span>
                    <h3 class="font-bold text-white">Ø¢Ú©Ø§Ø¯Ù…ÛŒ Ù…Ø§ÙÛŒØ§</h3>
                    <p class="text-xs text-slate-400 mt-1">Ø¢Ù…ÙˆØ²Ø´ Ùˆ Ø¢Ø²Ù…ÙˆÙ†</p>
                </div>
                <!-- Logic Puzzles -->
                <div onclick="startDetective()" class="panel p-4 rounded-2xl btn-press cursor-pointer flex flex-col items-center justify-center text-center h-40 border-b-4 border-red-600">
                    <span class="text-4xl mb-2">ğŸ•µï¸â€â™‚ï¸</span>
                    <h3 class="font-bold text-white">Ú©Ø§Ø±Ø¢Ú¯Ø§Ù‡ ÙˆÛŒÚ˜Ù‡</h3>
                    <p class="text-xs text-slate-400 mt-1">Ø­Ù„ Ù¾Ø±ÙˆÙ†Ø¯Ù‡ Ù‚ØªÙ„</p>
                </div>
            </div>

            <!-- Mind Game -->
            <div onclick="startMindGame()" class="panel p-5 rounded-2xl btn-press cursor-pointer flex items-center justify-between border-r-4 border-green-500">
                <div>
                    <h3 class="font-bold text-white text-lg">Ú†Ø§Ù„Ø´ Ø°Ù‡Ù† Ø¨Ø±ØªØ±</h3>
                    <p class="text-xs text-slate-400">Ø­Ø§ÙØ¸Ù‡ Ø®ÙˆØ¯ Ø±Ø§ ØªÙ‚ÙˆÛŒØª Ú©Ù†ÛŒØ¯</p>
                </div>
                <div class="w-12 h-12 bg-green-500/20 rounded-full flex items-center justify-center text-green-400 font-bold text-xl">
                    ğŸ§ 
                </div>
            </div>

             <!-- Coming Soon Replacement: Shop/Score -->
            <div class="panel p-4 rounded-xl flex justify-between items-center opacity-75">
                <div class="flex items-center gap-3">
                    <div class="bg-slate-700 p-2 rounded-lg">ğŸ†</div>
                    <div class="flex flex-col">
                        <span class="text-xs text-slate-400">Ø§Ù…ØªÛŒØ§Ø² Ú©Ù„ Ø´Ù…Ø§</span>
                        <span class="font-bold text-xl font-mono text-yellow-400" id="total-score-display">0</span>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- GOD TOOLS SCREEN -->
    <div id="god-tools-screen" class="screen bg-slate-900">
        <header class="flex items-center gap-3 mb-6">
            <button onclick="navigateTo('main-menu')" class="p-2 bg-slate-800 rounded-lg text-white">â¬…</button>
            <h2 class="font-lalezar text-2xl text-yellow-500">Ø¬Ø¹Ø¨Ù‡ Ø§Ø¨Ø²Ø§Ø± Ú¯Ø±Ø¯Ø§Ù†Ù†Ø¯Ù‡</h2>
        </header>

        <div class="flex flex-col gap-6 h-full">
            <!-- Role Distributor -->
            <div class="panel p-5 rounded-xl">
                <h3 class="font-bold text-white mb-4 flex items-center gap-2">
                    ğŸƒ Ù¾Ø®Ø´ Ú©Ù†Ù†Ø¯Ù‡ Ù†Ù‚Ø´
                </h3>
                <div class="space-y-4" id="role-setup-area">
                    <div class="flex justify-between items-center">
                        <span>ØªØ¹Ø¯Ø§Ø¯ Ù…Ø§ÙÛŒØ§:</span>
                        <div class="flex items-center bg-slate-800 rounded-lg">
                            <button class="px-3 py-1 text-xl text-red-400" onclick="adjustRole('mafia', -1)">-</button>
                            <span id="count-mafia" class="px-3 font-mono font-bold">1</span>
                            <button class="px-3 py-1 text-xl text-green-400" onclick="adjustRole('mafia', 1)">+</button>
                        </div>
                    </div>
                    <div class="flex justify-between items-center">
                        <span>ØªØ¹Ø¯Ø§Ø¯ Ø´Ù‡Ø±ÙˆÙ†Ø¯:</span>
                        <div class="flex items-center bg-slate-800 rounded-lg">
                            <button class="px-3 py-1 text-xl text-red-400" onclick="adjustRole('citizen', -1)">-</button>
                            <span id="count-citizen" class="px-3 font-mono font-bold">3</span>
                            <button class="px-3 py-1 text-xl text-green-400" onclick="adjustRole('citizen', 1)">+</button>
                        </div>
                    </div>
                    <div class="flex justify-between items-center">
                        <span>Ù¾Ø²Ø´Ú© / Ú©Ø§Ø±Ø¢Ú¯Ø§Ù‡:</span>
                        <div class="flex items-center bg-slate-800 rounded-lg">
                            <button class="px-3 py-1 text-xl text-red-400" onclick="adjustRole('special', -1)">-</button>
                            <span id="count-special" class="px-3 font-mono font-bold">0</span>
                            <button class="px-3 py-1 text-xl text-green-400" onclick="adjustRole('special', 1)">+</button>
                        </div>
                    </div>
                    <button onclick="distributeRoles()" class="w-full py-3 bg-gradient-to-r from-yellow-600 to-yellow-500 text-black font-bold rounded-xl btn-press shadow-lg shadow-yellow-500/20">
                        Ø´Ø±ÙˆØ¹ Ù¾Ø®Ø´ Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§
                    </button>
                </div>
                
                <!-- Card Reveal Area (Hidden initially) -->
                <div id="card-reveal-area" class="hidden flex-col items-center">
                    <p class="text-center text-sm text-slate-400 mb-4">Ú¯ÙˆØ´ÛŒ Ø±Ø§ Ø¯Ø³Øª Ø¨Ù‡ Ø¯Ø³Øª Ú©Ù†ÛŒØ¯. Ø±ÙˆÛŒ Ú©Ø§Ø±Øª Ø¨Ø²Ù†ÛŒØ¯ ØªØ§ Ù†Ù‚Ø´ Ø±Ø§ Ø¨Ø¨ÛŒÙ†ÛŒØ¯.</p>
                    <div class="role-card w-full max-w-[240px]" onclick="flipCard(this)">
                        <div class="role-card-inner">
                            <div class="role-front">
                                <span class="text-6xl mb-2">ğŸ‘ï¸</span>
                                <h3 class="text-xl font-bold">Ú©Ø§Ø±Øª Ø´Ù…Ø§Ø±Ù‡ <span id="current-card-num">1</span></h3>
                                <p class="text-xs text-slate-400 mt-2">Ø¨Ø±Ø§ÛŒ Ø¯ÛŒØ¯Ù† Ù†Ù‚Ø´ Ø¶Ø±Ø¨Ù‡ Ø¨Ø²Ù†ÛŒØ¯</p>
                            </div>
                            <div class="role-back" id="role-back-face">
                                <span class="text-5xl mb-2" id="role-icon">ğŸ­</span>
                                <h3 class="text-2xl font-lalezar text-white" id="role-name">Ù…Ø§ÙÛŒØ§</h3>
                            </div>
                        </div>
                    </div>
                    <button onclick="nextCard()" id="next-card-btn" class="mt-6 px-8 py-2 bg-slate-700 rounded-full text-white font-bold hidden">Ù†ÙØ± Ø¨Ø¹Ø¯ÛŒ â¡</button>
                    <button onclick="resetDistributor()" id="finish-card-btn" class="mt-6 px-8 py-2 bg-red-600 rounded-full text-white font-bold hidden">Ù¾Ø§ÛŒØ§Ù† ØªÙˆØ²ÛŒØ¹</button>
                </div>
            </div>

            <!-- Timer -->
            <div class="panel p-5 rounded-xl flex-grow">
                <h3 class="font-bold text-white mb-2 flex items-center gap-2">â±ï¸ ØªØ§ÛŒÙ…Ø± ØµØ­Ø¨Øª</h3>
                <div class="flex flex-col items-center justify-center h-full pb-4">
                    <div class="text-6xl font-mono font-bold text-yellow-400 mb-4 tracking-wider" id="god-timer-display">00:30</div>
                    <div class="flex gap-4 w-full justify-center">
                        <button onclick="toggleTimer()" id="timer-toggle-btn" class="w-16 h-16 rounded-full bg-green-600 flex items-center justify-center text-2xl shadow-lg">â–¶</button>
                        <button onclick="resetTimer()" class="w-16 h-16 rounded-full bg-slate-700 flex items-center justify-center text-2xl shadow-lg">â†º</button>
                    </div>
                    <input type="range" min="10" max="180" value="30" class="w-full mt-6 accent-yellow-500" oninput="setTimerDuration(this.value)">
                    <p class="text-xs text-slate-500 mt-2">Ø²Ù…Ø§Ù† Ù¾ÛŒØ´â€ŒÙØ±Ø¶: <span id="timer-setting-display">30</span> Ø«Ø§Ù†ÛŒÙ‡</p>
                </div>
            </div>
        </div>
    </div>

    <!-- DETECTIVE PUZZLE SCREEN -->
    <div id="detective-screen" class="screen bg-slate-900">
         <header class="flex items-center justify-between mb-4">
            <button onclick="navigateTo('main-menu')" class="p-2 bg-slate-800 rounded-lg">ğŸ </button>
            <div class="font-bold text-red-400">Ù¾Ø±ÙˆÙ†Ø¯Ù‡: <span id="case-id">001</span></div>
        </header>
        
        <div class="panel p-6 rounded-xl border border-red-900/50 relative overflow-hidden">
            <div class="absolute top-0 right-0 p-4 text-6xl opacity-10 rotate-12">ğŸ©¸</div>
            <h3 class="text-xl font-bold text-white mb-4 border-b border-slate-700 pb-2">Ú¯Ø²Ø§Ø±Ø´ ØµØ­Ù†Ù‡ Ø¬Ø±Ù…</h3>
            <p id="scenario-text" class="text-slate-300 leading-8 text-justify mb-6">
                Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù¾Ø±ÙˆÙ†Ø¯Ù‡...
            </p>
            
            <div class="bg-black/30 p-4 rounded-lg mb-4">
                <p class="text-yellow-500 text-sm font-bold mb-2">ğŸ’¡ Ø³ÙˆØ§Ù„:</p>
                <p id="scenario-question" class="text-white font-bold">Ù‚Ø§ØªÙ„ Ú©ÛŒØ³ØªØŸ</p>
            </div>

            <div id="scenario-options" class="grid grid-cols-1 gap-3">
                <!-- Options injected by JS -->
            </div>
        </div>
        <div id="scenario-feedback" class="mt-4 text-center font-bold text-lg h-8"></div>
    </div>

    <!-- ACADEMY/QUIZ SCREEN -->
    <div id="academy-screen" class="screen">
        <header class="flex justify-between items-center mb-6">
            <button onclick="navigateTo('main-menu')" class="p-2 bg-slate-800 rounded-lg">âŒ Ø§Ù†ØµØ±Ø§Ù</button>
            <div class="bg-blue-900 px-4 py-1 rounded-full text-blue-200 text-sm">Ø³ÙˆØ§Ù„ <span id="quiz-progress">1/10</span></div>
        </header>

        <div class="flex-grow flex flex-col justify-center">
            <div class="panel p-6 rounded-2xl mb-6 shadow-xl border-t-4 border-blue-500">
                <p id="quiz-question" class="text-xl font-bold text-center leading-loose">...</p>
            </div>

            <div id="quiz-options" class="grid grid-cols-1 gap-4">
                <!-- Quiz options injected here -->
            </div>
        </div>
    </div>

    <!-- MIND GAME SCREEN -->
    <div id="mind-screen" class="screen">
        <header class="flex justify-between items-center mb-6">
            <button onclick="navigateTo('main-menu')" class="p-2 bg-slate-800 rounded-lg">ğŸ </button>
            <div class="text-green-400 font-mono text-xl" id="mind-score">0</div>
        </header>
        
        <div class="flex flex-col items-center justify-center flex-grow text-center">
            <h2 class="text-2xl font-bold text-white mb-2">Ø±Ù…Ø² Ú¯Ø§ÙˆØµÙ†Ø¯ÙˆÙ‚</h2>
            <p class="text-slate-400 mb-8 text-sm">Ø§Ø¹Ø¯Ø§Ø¯ Ø±Ø§ Ø¨Ù‡ Ø®Ø§Ø·Ø± Ø¨Ø³Ù¾Ø§Ø± Ùˆ Ù…Ø¹Ú©ÙˆØ³ ÙˆØ§Ø±Ø¯ Ú©Ù†!</p>
            
            <div id="mind-display" class="text-6xl font-mono font-bold text-yellow-400 tracking-[10px] mb-12 min-h-[80px] flex items-center justify-center">
                <!-- Numbers appear here -->
            </div>

            <div id="mind-input-area" class="w-full max-w-xs hidden opacity-0 transition-opacity duration-500">
                <input type="number" id="mind-input" placeholder="Ø±Ù…Ø² Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†..." class="w-full bg-slate-800 text-white text-center text-2xl p-4 rounded-xl border-2 border-slate-600 focus:border-green-500 outline-none mb-4 font-mono">
                <button onclick="checkMindAnswer()" class="w-full bg-green-600 text-white font-bold py-3 rounded-xl btn-press">Ø¨Ø§Ø² Ú©Ø±Ø¯Ù† Ù‚ÙÙ„ ğŸ”“</button>
            </div>

            <button id="start-mind-round-btn" onclick="nextMindRound()" class="bg-yellow-500 text-black font-bold px-8 py-3 rounded-xl btn-press">Ø´Ø±ÙˆØ¹ Ù…Ø±Ø­Ù„Ù‡ 1</button>
        </div>
    </div>

    <!-- DEVELOPERS PANEL (OVERLAY) -->
    <div id="dev-panel" class="fixed inset-0 bg-black/90 z-50 hidden flex items-center justify-center p-4 backdrop-blur-sm transition-opacity duration-300 opacity-0">
        <div class="bg-slate-800 p-8 rounded-2xl max-w-sm w-full text-center border border-slate-700 relative shadow-2xl transform scale-95 transition-transform duration-300">
            <button onclick="closePanel('dev-panel')" class="absolute top-4 right-4 text-slate-400 hover:text-white text-xl">âœ•</button>
            
            <div class="w-20 h-20 bg-gradient-to-tr from-blue-600 to-purple-600 rounded-full mx-auto mb-4 flex items-center justify-center shadow-lg shadow-purple-500/30">
                <span class="text-3xl">ğŸš€</span>
            </div>
            
            <h2 class="text-2xl font-bold text-white mb-1">ØªÛŒÙ… Ø§Ø³Ú©ÙˆØ±Øª Ú¯ÛŒÙ…</h2>
            <p class="text-blue-400 text-sm font-bold mb-6">Escort Game Team</p>
            
            <div class="text-right space-y-4 text-slate-300 text-sm bg-slate-900/50 p-4 rounded-xl">
                <div class="flex items-center gap-3">
                    <span class="text-xl">ğŸ’</span>
                    <div>
                        <p class="text-white font-bold">Ø·Ø±Ø§Ø­ÛŒ Ùˆ ØªÙˆØ³Ø¹Ù‡ ÛŒÚ©Ù¾Ø§Ø±Ú†Ù‡</p>
                        <p class="text-xs text-slate-500">Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø´Ø¯Ù‡ Ø¨Ø±Ø§ÛŒ Ø¹Ù…Ù„Ú©Ø±Ø¯ Ø¨Ø§Ù„Ø§</p>
                    </div>
                </div>
                <div class="flex items-center gap-3">
                    <span class="text-xl">ğŸ¨</span>
                    <div>
                        <p class="text-white font-bold">Ø±Ø§Ø¨Ø· Ú©Ø§Ø±Ø¨Ø±ÛŒ Ø­Ø±ÙÙ‡â€ŒØ§ÛŒ</p>
                        <p class="text-xs text-slate-500">ØªØ¬Ø±Ø¨Ù‡ Ú©Ø§Ø±Ø¨Ø±ÛŒ Ø±ÙˆØ§Ù† Ùˆ Ù…Ø¯Ø±Ù†</p>
                    </div>
                </div>
            </div>
            
            <p class="mt-6 text-xs text-slate-600">Ù†Ø³Ø®Ù‡ 3.0.0 (Build Final)</p>
        </div>
    </div>

    <!-- TOAST CONTAINER -->
    <div id="toast-container"></div>

    <script>
        // --- GLOBAL STATE ---
        const state = {
            totalScore: 0,
            god: {
                roles: [],
                currentCardIndex: 0,
                timer: 30,
                timerInterval: null,
                timerRunning: false
            },
            quiz: {
                currentQuestion: 0,
                score: 0
            },
            mind: {
                level: 1,
                currentCode: "",
                showing: false
            },
            detective: {
                currentCase: 0
            }
        };

        // --- NAVIGATION ---
        function navigateTo(screenId) {
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
            document.getElementById(screenId).classList.add('active');
            
            // Cleanups
            if (screenId !== 'god-tools-screen') resetTimer();
        }

        function openPanel(id) {
            const el = document.getElementById(id);
            el.classList.remove('hidden');
            // Small delay for CSS transition
            setTimeout(() => {
                el.classList.remove('opacity-0');
                el.querySelector('div').classList.remove('scale-95');
                el.querySelector('div').classList.add('scale-100');
            }, 10);
        }

        function closePanel(id) {
            const el = document.getElementById(id);
            el.classList.add('opacity-0');
            el.querySelector('div').classList.remove('scale-100');
            el.querySelector('div').classList.add('scale-95');
            setTimeout(() => el.classList.add('hidden'), 300);
        }

        function showToast(msg, type = 'normal') {
            const container = document.getElementById('toast-container');
            const toast = document.createElement('div');
            toast.className = 'toast';
            toast.textContent = msg;
            if(type === 'error') toast.style.background = '#b91c1c';
            if(type === 'success') toast.style.background = '#15803d';
            
            container.appendChild(toast);
            setTimeout(() => {
                toast.style.opacity = '0';
                toast.style.transform = 'translateY(20px)';
                setTimeout(() => toast.remove(), 300);
            }, 2500);
        }

        // --- GOD TOOLS LOGIC ---
        function adjustRole(type, delta) {
            const el = document.getElementById(`count-${type}`);
            let val = parseInt(el.textContent);
            if (val + delta >= 0) {
                el.textContent = val + delta;
            }
        }

        function distributeRoles() {
            const mafias = parseInt(document.getElementById('count-mafia').textContent);
            const citizens = parseInt(document.getElementById('count-citizen').textContent);
            const specials = parseInt(document.getElementById('count-special').textContent);
            const total = mafias + citizens + specials;

            if (total < 3) {
                showToast('Ø­Ø¯Ø§Ù‚Ù„ Û³ Ø¨Ø§Ø²ÛŒÚ©Ù† Ù„Ø§Ø²Ù… Ø§Ø³Øª!', 'error');
                return;
            }

            // Create pool
            let pool = [];
            for(let i=0; i<mafias; i++) pool.push({name: 'Ù…Ø§ÙÛŒØ§', icon: 'ğŸ”«', type: 'mafia'});
            for(let i=0; i<citizens; i++) pool.push({name: 'Ø´Ù‡Ø±ÙˆÙ†Ø¯ Ø³Ø§Ø¯Ù‡', icon: 'ğŸ‘¤', type: 'citizen'});
            // Simple special assignment logic for demo
            if (specials > 0) pool.push({name: 'Ù¾Ø²Ø´Ú©', icon: 'ğŸ’‰', type: 'citizen'});
            if (specials > 1) pool.push({name: 'Ú©Ø§Ø±Ø¢Ú¯Ø§Ù‡', icon: 'ğŸ”', type: 'citizen'});
            for(let i=2; i<specials; i++) pool.push({name: 'ØªÚ©â€ŒØªÛŒØ±Ø§Ù†Ø¯Ø§Ø²', icon: 'ğŸ¯', type: 'citizen'});

            // Shuffle (Fisher-Yates)
            for (let i = pool.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [pool[i], pool[j]] = [pool[j], pool[i]];
            }

            state.god.roles = pool;
            state.god.currentCardIndex = 0;

            document.getElementById('role-setup-area').classList.add('hidden');
            document.getElementById('card-reveal-area').classList.remove('hidden');
            document.getElementById('card-reveal-area').classList.add('flex');
            updateCardDisplay();
        }

        function updateCardDisplay() {
            const card = document.querySelector('.role-card');
            card.classList.remove('flipped'); // Reset flip
            
            setTimeout(() => {
                const role = state.god.roles[state.god.currentCardIndex];
                document.getElementById('current-card-num').textContent = state.god.currentCardIndex + 1;
                document.getElementById('role-name').textContent = role.name;
                document.getElementById('role-icon').textContent = role.icon;
                
                const backFace = document.getElementById('role-back-face');
                if (role.type === 'mafia') {
                    backFace.classList.remove('citizen');
                } else {
                    backFace.classList.add('citizen');
                }
            }, 300);

            document.getElementById('next-card-btn').classList.add('hidden');
            
            // Check if last
            if (state.god.currentCardIndex >= state.god.roles.length - 1) {
                document.getElementById('finish-card-btn').classList.remove('hidden');
            }
        }

        function flipCard(el) {
            if (!el.classList.contains('flipped')) {
                el.classList.add('flipped');
                if (state.god.currentCardIndex < state.god.roles.length - 1) {
                    setTimeout(() => {
                         document.getElementById('next-card-btn').classList.remove('hidden');
                    }, 500);
                }
            }
        }

        function nextCard() {
            state.god.currentCardIndex++;
            updateCardDisplay();
        }

        function resetDistributor() {
            document.getElementById('role-setup-area').classList.remove('hidden');
            document.getElementById('card-reveal-area').classList.add('hidden');
            document.getElementById('card-reveal-area').classList.remove('flex');
            document.getElementById('finish-card-btn').classList.add('hidden');
            showToast('Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§ Ù¾Ø®Ø´ Ø´Ø¯! Ø¨Ø§Ø²ÛŒ Ø´Ø±ÙˆØ¹ Ø´Ø¯.');
        }

        // God Timer
        function setTimerDuration(val) {
            if (!state.god.timerRunning) {
                state.god.timer = parseInt(val);
                document.getElementById('timer-setting-display').textContent = val;
                updateTimerDisplay();
            }
        }
        
        function updateTimerDisplay() {
            const min = Math.floor(state.god.timer / 60);
            const sec = state.god.timer % 60;
            document.getElementById('god-timer-display').textContent = 
                `${min.toString().padStart(2,'0')}:${sec.toString().padStart(2,'0')}`;
        }

        function toggleTimer() {
            const btn = document.getElementById('timer-toggle-btn');
            if (state.god.timerRunning) {
                clearInterval(state.god.timerInterval);
                state.god.timerRunning = false;
                btn.textContent = 'â–¶';
                btn.classList.replace('bg-red-600', 'bg-green-600');
            } else {
                if (state.god.timer <= 0) return;
                state.god.timerRunning = true;
                btn.textContent = 'â¸';
                btn.classList.replace('bg-green-600', 'bg-red-600');
                state.god.timerInterval = setInterval(() => {
                    state.god.timer--;
                    updateTimerDisplay();
                    if (state.god.timer <= 0) {
                        clearInterval(state.god.timerInterval);
                        state.god.timerRunning = false;
                        btn.textContent = 'â–¶';
                        btn.classList.replace('bg-red-600', 'bg-green-600');
                        // Play beep logic here (if audio existed)
                        document.getElementById('god-timer-display').classList.add('text-red-500');
                        setTimeout(() => document.getElementById('god-timer-display').classList.remove('text-red-500'), 500);
                    }
                }, 1000);
            }
        }

        function resetTimer() {
            clearInterval(state.god.timerInterval);
            state.god.timerRunning = false;
            document.getElementById('timer-toggle-btn').textContent = 'â–¶';
            document.getElementById('timer-toggle-btn').classList.remove('bg-red-600');
            document.getElementById('timer-toggle-btn').classList.add('bg-green-600');
            state.god.timer = parseInt(document.getElementById('timer-setting-display').textContent);
            updateTimerDisplay();
        }

        // --- ACADEMY LOGIC ---
        const quizData = [
            { q: "Ø¯Ø± ØµÙˆØ±Øª ØªØ³Ø§ÙˆÛŒ Ø¢Ø±Ø§ Ø¯Ø± Ù…Ø±Ø­Ù„Ù‡ Ø¯ÙˆÙ… Ø±Ø§ÛŒâ€ŒÚ¯ÛŒØ±ÛŒØŒ Ú†Ù‡ Ø§ØªÙØ§Ù‚ÛŒ Ù…ÛŒâ€ŒØ§ÙØªØ¯ØŸ", opts: ["Ù‚Ø±Ø¹Ù‡ Ú©Ø´ÛŒ Ù…Ø±Ú¯", "Ù‡ÛŒÚ†Ú©Ø³ Ø®Ø§Ø±Ø¬ Ù†Ù…ÛŒâ€ŒØ´ÙˆØ¯", "Ø±Ø§ÛŒâ€ŒÚ¯ÛŒØ±ÛŒ Ù…Ø¬Ø¯Ø¯", "Ù¾Ø§Ø¯Ø´Ø§Ù‡ ØªØµÙ…ÛŒÙ… Ù…ÛŒâ€ŒÚ¯ÛŒØ±Ø¯"], a: 1 },
            { q: "Ù†Ù‚Ø´ 'Ù†Ø§ØªØ§Ø´Ø§' Ø¯Ø± Ø³Ù†Ø§Ø±ÛŒÙˆÛŒ Ú©Ù„Ø§Ø³ÛŒÚ© Ù…Ø¹Ø§Ø¯Ù„ Ú©Ø¯Ø§Ù… Ù†Ù‚Ø´ Ø§Ø³ØªØŸ", opts: ["Ø³Ø§ÛŒÙ„Ù†Ø³Ø±", "Ù…Ø°Ø§Ú©Ø±Ù‡â€ŒÚ©Ù†Ù†Ø¯Ù‡", "Ù¾Ø¯Ø±Ø®ÙˆØ§Ù†Ø¯Ù‡", "ØªØ±ÙˆØ±ÛŒØ³Øª"], a: 0 },
            { q: "Ø§Ú¯Ø± Ø¯Ú©ØªØ± Ø¯Ø± Ø´Ø¨ Ø¨Ù‡ Ø®ÙˆØ¯Ø´ Ø´Ù„ÛŒÚ© Ø´ÙˆØ¯ (ØªÙˆØ³Ø· Ù…Ø§ÙÛŒØ§) Ùˆ Ø®ÙˆØ¯Ø´ Ø±Ø§ Ø³ÛŒÙˆ Ø¯Ù‡Ø¯:", opts: ["Ù…ÛŒÙ…ÛŒØ±Ø¯", "Ø²Ù†Ø¯Ù‡ Ù…ÛŒâ€ŒÙ…Ø§Ù†Ø¯", "Ø¨Ø³ØªÚ¯ÛŒ Ø¨Ù‡ Ø³Ù†Ø§Ø±ÛŒÙˆ Ø¯Ø§Ø±Ø¯", "ÙÙ‚Ø· ÛŒÚ©Ø¨Ø§Ø± Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ø¯"], a: 3 }, // Common rule: usually once
            { q: "Ø§Ø³ØªØ¹Ù„Ø§Ù… Ú©Ø§Ø±Ø¢Ú¯Ø§Ù‡ Ø¨Ø±Ø§ÛŒ Ù¾Ø¯Ø±Ø®ÙˆØ§Ù†Ø¯Ù‡ Ú†ÛŒØ³ØªØŸ", opts: ["Ù…Ø«Ø¨Øª", "Ù…Ù†ÙÛŒ", "Ù†Ø§Ù…Ø´Ø®Øµ", "Ø¨Ø³ØªÚ¯ÛŒ Ø¨Ù‡ Ø²Ø±Ù‡ Ø¯Ø§Ø±Ø¯"], a: 1 }
        ];

        function startAcademy() {
            state.quiz.currentQuestion = 0;
            state.quiz.score = 0;
            navigateTo('academy-screen');
            loadQuestion();
        }

        function loadQuestion() {
            if (state.quiz.currentQuestion >= quizData.length) {
                showToast(`Ø¢Ø²Ù…ÙˆÙ† ØªÙ…Ø§Ù… Ø´Ø¯! Ø§Ù…ØªÛŒØ§Ø²: ${state.quiz.score}`, 'success');
                state.totalScore += state.quiz.score * 10;
                document.getElementById('total-score-display').textContent = state.totalScore;
                setTimeout(() => navigateTo('main-menu'), 2000);
                return;
            }
            const data = quizData[state.quiz.currentQuestion];
            document.getElementById('quiz-progress').textContent = `${state.quiz.currentQuestion + 1}/${quizData.length}`;
            document.getElementById('quiz-question').textContent = data.q;
            
            const cont = document.getElementById('quiz-options');
            cont.innerHTML = '';
            data.opts.forEach((opt, idx) => {
                const btn = document.createElement('button');
                btn.className = "w-full p-4 bg-slate-800 rounded-xl text-right hover:bg-slate-700 transition-colors border-2 border-transparent";
                btn.textContent = opt;
                btn.onclick = () => checkQuizAnswer(idx, btn, data.a);
                cont.appendChild(btn);
            });
        }

        function checkQuizAnswer(selected, btn, correct) {
            // Disable all buttons
            const btns = document.getElementById('quiz-options').children;
            for(let b of btns) b.disabled = true;

            if (selected === correct) {
                btn.classList.add('border-green-500', 'bg-green-900/20');
                state.quiz.score++;
                showToast('ØµØ­ÛŒØ­! âœ…', 'success');
            } else {
                btn.classList.add('border-red-500', 'bg-red-900/20');
                btns[correct].classList.add('border-green-500'); // Show correct
                showToast('Ø§Ø´ØªØ¨Ø§Ù‡ âŒ', 'error');
            }

            setTimeout(() => {
                state.quiz.currentQuestion++;
                loadQuestion();
            }, 1500);
        }

        // --- DETECTIVE PUZZLE ---
        const scenarios = [
            {
                text: "Ø¯Ø± Ø´Ø¨ Ø³ÙˆÙ…ØŒ Ø¯Ú©ØªØ± Ø´Ù‡Ø± Ù†Ø¬Ø§Øª Ù¾ÛŒØ¯Ø§ Ù†Ú©Ø±Ø¯Ù‡ Ø§Ø³Øª. Ú©Ø§Ø±Ø¢Ú¯Ø§Ù‡ Ø§Ø³ØªØ¹Ù„Ø§Ù… Ø¢Ù‚Ø§ÛŒ Ø§Ù„Ù Ø±Ø§ Ú¯Ø±ÙØªÙ‡ Ùˆ Ù…Ù†ÙÛŒ Ø¨ÙˆØ¯Ù‡. Ø¢Ù‚Ø§ÛŒ Ø¨ Ø§Ø¯Ø¹Ø§ÛŒ Ø§Ø³Ù†Ø§ÛŒÙ¾Ø± Ø¨ÙˆØ¯Ù† Ø¯Ø§Ø±Ø¯ Ùˆ Ù…ÛŒâ€ŒÚ¯ÙˆÛŒØ¯ Ø¯ÛŒØ´Ø¨ ØªÛŒØ± Ø²Ø¯Ù‡ Ø§Ù…Ø§ Ú©Ø³ÛŒ Ø¨ÛŒØ±ÙˆÙ† Ù†Ø±ÙØªÙ‡. Ø¢Ù‚Ø§ÛŒ Ø¬ Ø³Ú©ÙˆØª Ú©Ø±Ø¯Ù‡.",
                q: "Ø¢Ù‚Ø§ÛŒ Ø¨ Ø±Ø§Ø³Øª Ù…ÛŒâ€ŒÚ¯ÙˆÛŒØ¯ ÛŒØ§ Ù…Ø§ÙÛŒØ§Ø³ØªØŸ",
                opts: ["Ø±Ø§Ø³Øª Ù…ÛŒâ€ŒÚ¯ÙˆÛŒØ¯ (ØªÛŒØ±Ø´ Ø¨Ù‡ Ø±ÙˆÛŒÛŒÙ†â€ŒØªÙ† Ø®ÙˆØ±Ø¯Ù‡)", "Ø¯Ø±ÙˆØº Ù…ÛŒâ€ŒÚ¯ÙˆÛŒØ¯ (Ù…Ø§ÙÛŒØ§Ø³Øª)"],
                a: 0, // Simplified logic for demo
                reason: "Ø§Ú¯Ø± ØªÛŒØ± Ø§Ø³Ù†Ø§ÛŒÙ¾Ø± Ø¨Ù‡ Ø±ÙˆÛŒÛŒÙ† ØªÙ† Ø¨Ø®ÙˆØ±Ø¯ØŒ Ú©Ø³ÛŒ Ø¨ÛŒØ±ÙˆÙ† Ù†Ù…ÛŒØ±ÙˆØ¯."
            }
        ];

        function startDetective() {
            navigateTo('detective-screen');
            loadScenario(0);
        }

        function loadScenario(idx) {
            const s = scenarios[idx];
            document.getElementById('scenario-text').textContent = s.text;
            document.getElementById('scenario-question').textContent = s.q;
            const cont = document.getElementById('scenario-options');
            cont.innerHTML = '';
            document.getElementById('scenario-feedback').textContent = '';
            
            s.opts.forEach((opt, i) => {
                const btn = document.createElement('button');
                btn.className = "w-full p-3 bg-slate-700 rounded-lg text-white hover:bg-slate-600";
                btn.textContent = opt;
                btn.onclick = () => {
                    if (i === s.a) {
                        document.getElementById('scenario-feedback').textContent = "Ø§Ø³ØªØ¯Ù„Ø§Ù„ ØµØ­ÛŒØ­ Ø¨ÙˆØ¯! ğŸ•µï¸â€â™‚ï¸";
                        document.getElementById('scenario-feedback').className = "mt-4 text-center font-bold text-lg h-8 text-green-400";
                        state.totalScore += 50;
                        document.getElementById('total-score-display').textContent = state.totalScore;
                    } else {
                        document.getElementById('scenario-feedback').textContent = "Ø§Ø³ØªØ¯Ù„Ø§Ù„ ØºÙ„Ø·! ğŸ’€";
                        document.getElementById('scenario-feedback').className = "mt-4 text-center font-bold text-lg h-8 text-red-400";
                    }
                }
                cont.appendChild(btn);
            });
        }

        // --- MIND GAME ---
        function startMindGame() {
            state.mind.level = 1;
            state.mind.score = 0;
            document.getElementById('mind-score').textContent = 0;
            navigateTo('mind-screen');
            document.getElementById('mind-input-area').classList.add('hidden');
            document.getElementById('mind-input-area').classList.remove('opacity-100');
            document.getElementById('start-mind-round-btn').classList.remove('hidden');
            document.getElementById('start-mind-round-btn').textContent = "Ø´Ø±ÙˆØ¹ Ù…Ø±Ø­Ù„Ù‡ Û±";
            document.getElementById('mind-display').textContent = "";
        }

        function nextMindRound() {
            document.getElementById('start-mind-round-btn').classList.add('hidden');
            document.getElementById('mind-input-area').classList.add('hidden');
            document.getElementById('mind-input-area').classList.remove('opacity-100');
            
            // Generate Code based on level
            let digits = 2 + state.mind.level; 
            let code = "";
            for(let i=0; i<digits; i++) code += Math.floor(Math.random()*10);
            state.mind.currentCode = code;

            const display = document.getElementById('mind-display');
            display.textContent = code;
            display.classList.add('pulse-effect');

            // Hide after time
            let timeToShow = 2000 + (state.mind.level * 500);
            setTimeout(() => {
                display.textContent = "ØŸ";
                display.classList.remove('pulse-effect');
                
                const inputArea = document.getElementById('mind-input-area');
                inputArea.classList.remove('hidden');
                // Allow reflow
                void inputArea.offsetWidth;
                inputArea.classList.add('opacity-100');
                
                const input = document.getElementById('mind-input');
                input.value = '';
                input.focus();
            }, timeToShow);
        }

        function checkMindAnswer() {
            const input = document.getElementById('mind-input').value;
            // The trick: User must enter it REVERSED (as per instructions "Ù…Ø¹Ú©ÙˆØ³ ÙˆØ§Ø±Ø¯ Ú©Ù†") 
            // OR simple match for now to keep it playable
            // Let's stick to simple match for user friendliness unless they read carefully. 
            // Wait, UI said "Ø¨Ù‡ Ø®Ø§Ø·Ø± Ø¨Ø³Ù¾Ø§Ø±". Let's do simple match. 
            // Wait, I put "Ù…Ø¹Ú©ÙˆØ³ ÙˆØ§Ø±Ø¯ Ú©Ù†" in HTML. Okay, let's enforce reverse.
            
            const reversedInput = input; // If user types 123, logic expects 321? 
            // Actually, let's make it standard memory: Input what you saw.
            // I'll remove "reverse" text from HTML to avoid confusion or keep it simple.
            // *Self-Correction*: The HTML says "Ù…Ø¹Ú©ÙˆØ³ ÙˆØ§Ø±Ø¯ Ú©Ù†". I should check logic.
            const correctReverse = state.mind.currentCode.split('').reverse().join('');
            
            if (input === correctReverse) {
                state.mind.level++;
                state.mind.score += 10;
                document.getElementById('mind-score').textContent = state.mind.score;
                showToast('Ø¹Ø§Ù„ÛŒ! Ù…Ø±Ø­Ù„Ù‡ Ø¨Ø¹Ø¯ÛŒ', 'success');
                document.getElementById('start-mind-round-btn').textContent = `Ø´Ø±ÙˆØ¹ Ù…Ø±Ø­Ù„Ù‡ ${state.mind.level}`;
                document.getElementById('start-mind-round-btn').classList.remove('hidden');
                document.getElementById('mind-input-area').classList.add('hidden');
                document.getElementById('mind-input-area').classList.remove('opacity-100');
            } else {
                showToast(`ØºÙ„Ø·! Ø±Ù…Ø²: ${state.mind.currentCode}`, 'error');
                // Game Over logic or retry
                setTimeout(() => {
                    startMindGame(); // Reset
                }, 2000);
            }
        }

        // --- INIT ---
        window.onload = () => {
            // Fake loading progress
            setTimeout(() => {
                document.getElementById('loading-screen').classList.remove('active');
                document.getElementById('main-menu').classList.add('active');
            }, 2500);
        };

    </script>
</body>
</html>
